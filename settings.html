<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - Momentum</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/animations.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
</head>
<body>
    <nav class="bottom-nav">
        <div class="nav-container">
            <a href="index.html" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
                </svg>
                <span class="nav-label">Dashboard</span>
            </a>
            <a href="tasks.html" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                </svg>
                <span class="nav-label">Tasks</span>
            </a>
            <a href="summary.html" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
                </svg>
                <span class="nav-label">Summary</span>
            </a>
            <a href="settings.html" class="nav-item active">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
                </svg>
                <span class="nav-label">Settings</span>
            </a>
            <a href="about.html" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
                </svg>
                <span class="nav-label">About</span>
            </a>
        </div>
    </nav>

    <main class="settings-container">
        <header class="page-header">
            <h1>Settings</h1>
        </header>

        <div class="settings-sections">
            <!-- Alarm Settings -->
            <section class="settings-section">
                <h2 class="section-title">‚è∞ Alarm Settings</h2>
                
                <div class="setting-item">
                    <div class="setting-info">
                        <h3>Wake-up Time</h3>
                        <p>Set your daily wake-up alarm</p>
                    </div>
                    <div class="setting-control">
                        <input type="time" id="wakeup-time" value="07:00" class="time-input">
                    </div>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <h3>Alarm Sound</h3>
                        <p>Choose your alarm tone</p>
                    </div>
                    <div class="setting-control">
                        <select id="alarm-sound" class="select-input">
                            <option value="chime">Gentle Chime</option>
                            <option value="birds">Morning Birds</option>
                            <option value="piano">Piano Notes</option>
                            <option value="digital">Digital Alarm</option>
                        </select>
                    </div>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <h3>Vibration</h3>
                        <p>Enable vibration with alarm</p>
                    </div>
                    <div class="setting-control">
                        <label class="switch">
                            <input type="checkbox" id="vibration-toggle" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <h3>Alarm Message</h3>
                        <p>Customize your wake-up message</p>
                    </div>
                    <div class="setting-control">
                        <input type="text" id="alarm-message" value="Time to start your day with purpose!" class="text-input" maxlength="100">
                    </div>
                </div>
            </section>

            <!-- Task Settings -->
            <section class="settings-section">
                <h2 class="section-title">üìù Task Settings</h2>
                
                <div class="setting-item">
                    <div class="setting-info">
                        <h3>Must-Do Tasks</h3>
                        <p>Maximum must-do tasks per day</p>
                    </div>
                    <div class="setting-control">
                        <input type="number" id="must-do-count" min="1" max="10" value="3" class="number-input">
                    </div>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <h3>Task Notifications</h3>
                        <p>Notify before task starts</p>
                    </div>
                    <div class="setting-control">
                        <select id="notification-time" class="select-input">
                            <option value="5">5 minutes before</option>
                            <option value="10">10 minutes before</option>
                            <option value="15">15 minutes before</option>
                            <option value="0">At task time</option>
                        </select>
                    </div>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <h3>Auto-complete</h3>
                        <p>Auto-mark tasks as done when time passes</p>
                    </div>
                    <div class="setting-control">
                        <label class="switch">
                            <input type="checkbox" id="autocomplete-toggle">
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
            </section>

            <!-- Theme Settings -->
            <section class="settings-section">
                <h2 class="section-title">üé® Theme Settings</h2>
                
                <div class="setting-item">
                    <div class="setting-info">
                        <h3>Theme Color</h3>
                        <p>Choose your primary color</p>
                    </div>
                    <div class="setting-control">
                        <div class="color-picker">
                            <button class="color-option" data-color="#667eea" style="background-color: #667eea;"></button>
                            <button class="color-option" data-color="#4fd1c5" style="background-color: #4fd1c5;"></button>
                            <button class="color-option" data-color="#ed64a6" style="background-color: #ed64a6;"></button>
                            <button class="color-option" data-color="#9f7aea" style="background-color: #9f7aea;"></button>
                            <button class="color-option" data-color="#38b2ac" style="background-color: #38b2ac;"></button>
                        </div>
                    </div>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <h3>Dark Mode</h3>
                        <p>Switch between light and dark theme</p>
                    </div>
                    <div class="setting-control">
                        <label class="switch">
                            <input type="checkbox" id="dark-mode-toggle">
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <h3>Font Size</h3>
                        <p>Adjust text size</p>
                    </div>
                    <div class="setting-control">
                        <select id="font-size" class="select-input">
                            <option value="small">Small</option>
                            <option value="medium" selected>Medium</option>
                            <option value="large">Large</option>
                        </select>
                    </div>
                </div>
            </section>

            <!-- Data Management -->
            <section class="settings-section">
                <h2 class="section-title">üíæ Data Management</h2>
                
                <div class="setting-item">
                    <div class="setting-info">
                        <h3>Export Data</h3>
                        <p>Download your tasks and progress</p>
                    </div>
                    <div class="setting-control">
                        <button id="export-data" class="secondary-btn">Export</button>
                    </div>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <h3>Import Data</h3>
                        <p>Restore from backup</p>
                    </div>
                    <div class="setting-control">
                        <button id="import-data" class="secondary-btn">Import</button>
                        <input type="file" id="import-file" accept=".json" style="display: none;">
                    </div>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <h3>Clear All Data</h3>
                        <p>Reset everything to default</p>
                    </div>
                    <div class="setting-control">
                        <button id="reset-data" class="danger-btn">Reset</button>
                    </div>
                </div>
            </section>

            <!-- About & Help -->
            <section class="settings-section">
                <h2 class="section-title">‚ÑπÔ∏è About & Help</h2>
                
                <div class="setting-item">
                    <div class="setting-info">
                        <h3>App Version</h3>
                        <p>Momentum v1.0.0</p>
                    </div>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <h3>Rate App</h3>
                        <p>Share your feedback</p>
                    </div>
                    <div class="setting-control">
                        <button id="rate-app" class="secondary-btn">Rate</button>
                    </div>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <h3>Help & Support</h3>
                        <p>Get help using Momentum</p>
                    </div>
                    <div class="setting-control">
                        <button id="help-support" class="secondary-btn">Help</button>
                    </div>
                </div>
            </section>
        </div>

        <!-- Save Button -->
        <div class="save-settings">
            <button id="save-settings" class="primary-btn full-width">Save Settings</button>
        </div>
    </main>

    <!-- Confirmation Modal -->
    <div id="confirm-modal" class="modal">
        <div class="modal-content confirm-modal">
            <div class="modal-header">
                <h3 id="confirm-title">Confirm Action</h3>
            </div>
            <div class="modal-body">
                <p id="confirm-message">Are you sure you want to proceed?</p>
            </div>
            <div class="modal-actions">
                <button id="confirm-cancel" class="secondary-btn">Cancel</button>
                <button id="confirm-ok" class="primary-btn">Confirm</button>
            </div>
        </div>
    </div>

    <script src="js/storage.js"></script>
    <script src="js/app.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Load saved settings
            const settings = JSON.parse(localStorage.getItem('momentum_settings') || '{}');
            
            if (settings.wakeupTime) document.getElementById('wakeup-time').value = settings.wakeupTime;
            if (settings.alarmSound) document.getElementById('alarm-sound').value = settings.alarmSound;
            if (settings.vibration !== undefined) document.getElementById('vibration-toggle').checked = settings.vibration;
            if (settings.alarmMessage) document.getElementById('alarm-message').value = settings.alarmMessage;
            if (settings.mustDoCount) document.getElementById('must-do-count').value = settings.mustDoCount;
            if (settings.notificationTime) document.getElementById('notification-time').value = settings.notificationTime;
            if (settings.autoComplete !== undefined) document.getElementById('autocomplete-toggle').checked = settings.autoComplete;
            if (settings.darkMode !== undefined) document.getElementById('dark-mode-toggle').checked = settings.darkMode;
            if (settings.fontSize) document.getElementById('font-size').value = settings.fontSize;
            
            // Theme color selection
            document.querySelectorAll('.color-option').forEach(btn => {
                if (settings.themeColor === btn.dataset.color) {
                    btn.classList.add('active');
                }
                
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.color-option').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            // Save settings
            document.getElementById('save-settings').addEventListener('click', function() {
                const newSettings = {
                    wakeupTime: document.getElementById('wakeup-time').value,
                    alarmSound: document.getElementById('alarm-sound').value,
                    vibration: document.getElementById('vibration-toggle').checked,
                    alarmMessage: document.getElementById('alarm-message').value,
                    mustDoCount: parseInt(document.getElementById('must-do-count').value),
                    notificationTime: document.getElementById('notification-time').value,
                    autoComplete: document.getElementById('autocomplete-toggle').checked,
                    themeColor: document.querySelector('.color-option.active')?.dataset.color || '#667eea',
                    darkMode: document.getElementById('dark-mode-toggle').checked,
                    fontSize: document.getElementById('font-size').value
                };
                
                localStorage.setItem('momentum_settings', JSON.stringify(newSettings));
                
                // Show success message
                alert('Settings saved successfully!');
            });
            
            // Export data
            document.getElementById('export-data').addEventListener('click', function() {
                const data = {
                    tasks: JSON.parse(localStorage.getItem('momentum_tasks') || '[]'),
                    settings: JSON.parse(localStorage.getItem('momentum_settings') || '{}'),
                    streak: parseInt(localStorage.getItem('momentum_streak') || '0'),
                    skipBank: JSON.parse(localStorage.getItem('momentum_skip_bank') || '[]')
                };
                
                const blob = new Blob([JSON.stringify(data, null, 2)], {type: 'application/json'});
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `momentum-backup-${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            });
            
            // Import data
            document.getElementById('import-data').addEventListener('click', function() {
                document.getElementById('import-file').click();
            });
            
            document.getElementById('import-file').addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = function(event) {
                    try {
                        const data = JSON.parse(event.target.result);
                        
                        if (confirm('This will replace all your current data. Continue?')) {
                            if (data.tasks) localStorage.setItem('momentum_tasks', JSON.stringify(data.tasks));
                            if (data.settings) localStorage.setItem('momentum_settings', JSON.stringify(data.settings));
                            if (data.streak) localStorage.setItem('momentum_streak', data.streak.toString());
                            if (data.skipBank) localStorage.setItem('momentum_skip_bank', JSON.stringify(data.skipBank));
                            
                            alert('Data imported successfully!');
                            location.reload();
                        }
                    } catch (error) {
                        alert('Error importing data. Invalid file format.');
                    }
                };
                reader.readAsText(file);
            });
            
            // Reset data
            document.getElementById('reset-data').addEventListener('click', function() {
                if (confirm('Are you sure you want to reset all data? This cannot be undone.')) {
                    localStorage.clear();
                    alert('All data has been reset.');
                    location.reload();
                }
            });
        });
    </script>
</body>
</html>
